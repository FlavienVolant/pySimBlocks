name: Algebraic Function
category: operators
type: algebraic_function

summary: >
  User-defined stateless algebraic function implemented in Python.

description: |
  This block evaluates a user-provided Python function of the form:

      y = g(t, dt, u1, u2, ...)

  The function is loaded from an external Python file and executed at each
  simulation step. Input and output ports are explicitly declared via
  `input_keys` and `output_keys`.

  This block is stateless and has direct feedthrough.

parameters:
  file_path:
    type: string
    required: true
    description: >
      Absolute path to the Python file containing the function.

  function_name:
    type: string
    required: true
    description: >
      Name of the function to call inside the Python file.

  input_keys:
    type: list[string]
    required: true
    description: >
      List of input port names. These must match the function arguments
      after (t, dt).

  output_keys:
    type: list[string]
    required: true
    description: >
      List of output port names. The function must return a dict with
      exactly these keys.

  sample_time:
    type: float
    required: false
    description: >
      Optional execution period of the block.

ports:
  inputs:
    - name: in
      dynamic: true
      pattern: "{val}"
      source:
        type: parameter
        parameter: input_keys
        operation: keys

  outputs:
    - name: out
      dynamic: true
      pattern: "{val}"
      source:
        type: parameter
        parameter: output_keys
        operation: keys

execution:
  direct_feedthrough: true
  has_state: false
