# pySimBlocks - LGPL-3.0-or-later
# Copyright (c) 2026 Antoine Alessandrini

name: Delay
category: operators
type: delay

summary: >
  N-step discrete-time delay block.

description: >
  Implements a discrete delay of $N$ simulation steps:
  $$
  y[k] = u[k - N]
  $$

parameters:
  num_delays:
    type: int
    required: false
    autofill: true
    default: 1

  initial_output:
    type: scalar | vector | matrix
    required: false

  sample_time:
    type: float
    required: false

ports:
  inputs:
    - name: in
      dynamic: false
      pattern: in
      source:
        type: fixed
      shape: [n, m]
      description: Input signal.

    - name: reset
      dynamic: false
      pattern: reset
      source:
        type: fixed
      shape: []
      description: Reset signal (0/1). When high (1), the delay state is reset to the initial output value.

  outputs:
    - name: out
      dynamic: false
      pattern: out
      source:
        type: fixed
      shape: [n, m]
      description: Delayed output signal.

execution:
  direct_feedthrough: false
  has_state: true
